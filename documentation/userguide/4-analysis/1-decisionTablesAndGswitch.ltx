\chapter{mbeddr.analyses --- Default Formal Analyses}

Besides improvements in productivity, the higher level extensions of C allow the definition of
automatic and usable formal analyses. For performing formal analyses we use the following tools
that have to be installed on your computer and have to be introduced in the PATH.

\begin{itemize}
\item {\bf NuSMV} - \url{http://nusmv.fbk.eu/}
\item {\bf Yices} - \url{http://yices.csl.sri.com/download.shtml}
\item {\bf CBMC} - \url{http://www.cprover.org/cbmc/}
\end{itemize}


\section{Checking Decision Tables}
A decision table is a more elegant and explicit way of coding two dimensional choices albeit 
realizable as imbricated if-statements. For decision tables we define two analyses:
\begin{enumerate}
\item {\bf Completeness} checks if the decision table covers all possible cases.
\item {\bf Consistency} checks if there are cases for which two cells of the decision table can 
be active at the same time.
\end{enumerate}

As long as the expressions used as conditions are "simple", the above analyses can be 
automatically performed by using an SMT (satisfiability modulo theories) solver -- we use 
the Yices solver from SRI.

\begin{center} 
  \includegraphics[width=0.6\columnwidth]{figures/analyses/decTabExample.png}
\end{center}

The first step for analyzing decision tables is to add the devKit \ic{com-mbeddr.analyses.dectab}
to the model that contains the decision table.
\begin{center} 
  \includegraphics[width=0.5\columnwidth]{figures/analyses/decTabDevKitConfig.png}
\end{center}

Once the devKit is added to the model, you can mark a decision table as \ic{verifiable} by using 
an intention on the left-upper corner of the decision table. Once the \ic{verifiable} flag is set it will
be displayed on the right-hand-side of the table (underlined with red in our figure). 
\begin{center} 
  \includegraphics[width=0.6\columnwidth]{figures/analyses/decTabMarkAsVerifiable.png}
\end{center}
A set of automatic checks are performed by MPS to assure that the conditions used in the top 
line and left column of the decision table can be analyzed. If the used expressions are not 
supported an error message is displayed with an explanation about the cause. In this case
the completeness and consistency analyses cannot be run.
\begin{center} 
  \includegraphics[width=0.6\columnwidth]{figures/analyses/decTabLinearArithmetics.png}
\end{center}

Once a decision table is marked as verifiable, the verification can be run with the help of an action.
Once the action is started, the corresponding Yices code is generated, Yices is started in the background
and the results of the verification will be lifted and presented in a window.
\begin{center} 
  \includegraphics[width=0.6\columnwidth]{figures/analyses/decTabVerifyAction.png}
\end{center}

\begin{center} 
  \includegraphics[width=0.5\columnwidth]{figures/analyses/decTabResult.png}
\end{center}
