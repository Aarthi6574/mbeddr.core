def script_build_cbmcWin = new File(rootProject.projectDir.absolutePath + "/build" + "/com.mbeddr.analyses.cbmc/" + "build-cbmc-win.bat")
def script_build_cbmcLinux = new File(rootProject.projectDir.absolutePath + "/build" + "/com.mbeddr.analyses.cbmc/" + "build-cbmc-linux.sh")
def script_build_cbmcMac = new File(rootProject.projectDir.absolutePath + "/build" + "/com.mbeddr.analyses.cbmc/" + "build-cbmc-mac.sh")

def cbmcHome = rootProject.projectDir.absolutePath + "/../cbmc/src"

task build_cbmcWin(type: Exec) {
  workingDir file(cbmcHome)
  //def args = buildProcSpawnArgList(['start', script_build_cbmcWin])
  //commandLine(args)
  commandLine(script_build_cbmcWin)
}

task build_cbmcMac(type: Exec) {
    workingDir file(cbmcHome)
    def args = buildProcSpawnArgList([script_build_cbmcMac])
    commandLine(args)
}

task build_cbmcLinux(type: Exec) {
    workingDir file(cbmcHome)
    def args = buildProcSpawnArgList([script_build_cbmcMac])
    commandLine(args)

    workingDir file(cbmcHome)
    commandLine(script_build_cbmcLinux)
}

task publish_cbmcWin(type: Zip) {
    from file("../cbmc/" + "cbmc-win.zip")
}

task publish_cbmcMac(type: Zip) {
    from file("../cbmc/" + "cbmc-mac.zip")
}

task publish_cbmcLinux(type: Zip) {
    from file("../cbmc/" + "cbmc-linux.tar.gz")
}
