package com.mbeddr.core.debug.plugin;

/*Generated by MPS */

import java.io.File;
import com.intellij.execution.process.ProcessHandler;
import com.intellij.execution.ExecutionException;
import jetbrains.mps.execution.api.commands.ProcessHandlerBuilder;

public class Execute_Command {
  private File myWorkingDirectory;
  private String myParameters;
  private String myBinary;

  public Execute_Command() {
  }

  public Execute_Command setWorkingDirectory(File workingDirectory) {
    if (workingDirectory != null) {
      myWorkingDirectory = workingDirectory;
    }
    return this;
  }

  public Execute_Command setParameters(String parameters) {
    if (parameters != null) {
      myParameters = parameters;
    }
    return this;
  }

  public Execute_Command setBinary(String binary) {
    if (binary != null) {
      myBinary = binary;
    }
    return this;
  }

  public ProcessHandler createProcess(File binary) throws ExecutionException {
    return new ProcessHandlerBuilder().append(Execute_Command.protect(binary.getAbsolutePath())).append(myParameters).build(myWorkingDirectory);
  }

  private static String protect(String rawString) {
    if (rawString.contains(" ")) {
      return "\"" + rawString + "\"";
    }
    return rawString;
  }
}
