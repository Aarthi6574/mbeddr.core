package com.mbeddr.core.runconfiguration.plugin;

/*Generated by MPS */

import jetbrains.mps.logging.Logger;
import com.intellij.execution.process.ProcessHandler;
import jetbrains.mps.smodel.SNode;
import com.intellij.execution.ExecutionException;
import jetbrains.mps.vfs.IFile;
import jetbrains.mps.baseLanguage.closures.runtime.Wrappers;
import jetbrains.mps.smodel.ModelAccess;
import jetbrains.mps.execution.api.commands.ProcessHandlerBuilder;
import java.io.File;

public class Make_Command {
  private static Logger LOG = Logger.getLogger(Make_Command.class);

  public Make_Command() {
  }

  public ProcessHandler createProcess(SNode binary) throws ExecutionException {
    final IFile makeFile = Util.getPath(binary);
    final Wrappers._T<ProcessHandler> result = new Wrappers._T<ProcessHandler>();
    ModelAccess.instance().runReadAction(new Runnable() {
      public void run() {
        try {
          result.value = new ProcessHandlerBuilder().append("make debug").build(new File(makeFile.getParent().getAbsolutePath()));
        } catch (Exception e) {
          LOG.error("exception thrown", e);
        }
      }
    });
    return result.value;
  }
}
