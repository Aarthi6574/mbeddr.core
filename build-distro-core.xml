<project name="com.mbeddr.core dsitribution" default="build-distro">
 
  <taskdef name="registerZip" classname="com.mbeddr.util.RegisterZipTask"/>
  <taskdef name="createHtml" classname="com.mbeddr.util.AntHtmlTask"/>
	 
  <property name="prefix.core" value="mbeddr/code/languages/com.mbeddr.core"/>
  <property name="prefix.util" value="mbeddr/code/languages/com.mbeddr.mpsutil"/>
  <property name="prefix.apps" value="mbeddr/code/applications"/>
	
  <target name="build-distro">

 	  <property name="path" value="distros/core/"/>
	  <mkdir dir="${path}"/>
	  <delete includeemptydirs="true">
          <fileset dir="${path}" includes="**/*"/>
      </delete>
      
	  <registerZip file="mbeddr.core-${version}.zip" desc="mbeddr.core" dependsOn="" docs="userguide_mbeddr.core.pdf" example="mbeddr.core-examples-${version}.zip"/>
	  <zip destfile="${path}/mbeddr.core-${version}.zip">
          <zipfileset dir="code/languages/com.mbeddr.core/languages" prefix="${prefix.core}/languages"/>
          <zipfileset dir="code/languages/com.mbeddr.core/devkits" prefix="${prefix.core}/devkits"/>
          <zipfileset dir="code/languages/com.mbeddr.mpsutil/languages" prefix="${prefix.util}/languages"/>
	  </zip>
	  <zip destfile="${path}/mbeddr.core-examples-${version}.zip">
          <zipfileset dir="code/applications/HelloWorld" prefix="${prefix.apps}/HelloWorld"/>
	  </zip>
	  <copy file="documentation/userguide_mbeddr.core/userguide_mbeddr.core.pdf" tofile="${path}/userguide_mbeddr.core.pdf"/>
	  
	  <createHtml path="${path}" version="${version}" webRoot="${webRoot}"/> 

  </target>
  
</project>
